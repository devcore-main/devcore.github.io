<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Reset Password - DEV-CORE</title>
<style>
/* ===== GLOBAL STYLE ===== */
* { margin:0;
padding:0;
box-sizing:border-box;
font-family:"Poppins", sans-serif; }
body { background:#0d0d0d; color:#fff;
min-height:100vh;
display:flex; 
flex-direction:column; }
header { background:linear-gradient(135deg, #6a25ff, #3c0a99);
padding:30px 20px;
text-align:center; 
border-bottom:2px solid #8f44ff; }
header h1 { font-size:2rem; 
text-transform:uppercase; 
letter-spacing:3px; }
header p { opacity:0.8;
margin-top:5px; }
.auth-container { flex:1; 
display:flex; 
justify-content:center;
align-items:center;
padding:40px 20px; }
.auth-card { background:#111; padding:40px;
border-radius:14px;
border:1px solid #333;
width:100%;
max-width:500px;
box-shadow:0 10px 40px rgba(0,0,0,0.5); }
.auth-card h2 { font-size:2rem; margin-bottom:10px;
color:#b788ff;
text-align:center; }
.auth-subtitle { text-align:center;opacity:0.7; 
margin-bottom:30px; }
.form-group { margin-bottom:20px; }
.form-group label { display:block; margin-bottom:8px;
font-weight:500; 
color:#fff; }
.form-group input[type="password"] { width:100%;
padding:12px;
background:#1a1a1a; 
border:1px solid #333; 
border-radius:8px; 
color:#fff; 
font-size:1rem; 
transition:0.3s; }
.form-group input:focus { outline:none;
border-color:#8f44ff; 
box-shadow:0 0 0 3px rgba(143,68,255,0.1); }
.btn-submit { width:100%;
padding:14px; 
background:#8f44ff; 
color:#fff; 
border:none; 
border-radius:8px; 
font-size:1.1rem; font-weight:bold; 
cursor:pointer; 
transition:0.3s; 
margin-top:10px; }
.btn-submit:hover { background:#6a25ff; 
transform:translateY(-2px); }
.btn-submit:disabled { background:#555; 
cursor:not-allowed;
transform:none; }
.btn-loader { display:inline-block; }
.form-message { margin-top:15px; padding:12px; 
border-radius:8px; 
text-align:center; 
display:none; }
.form-message.success { background:rgba(0,255,136,0.2); color:#00ff88; 
border:1px solid #00ff88; display:block; }
.form-message.error { background:rgba(255,68,68,0.2); color:#ff4444; 
border:1px solid #ff4444; 
display:block; }
.auth-footer { margin-top:25px; text-align:center; }
.auth-footer p { opacity:0.7; }
.auth-footer a { color:#8f44ff; text-decoration:none; 
font-weight:bold; }
.auth-footer a:hover { text-decoration:underline; }
footer { background:#0b0b0b; padding:30px 20px; 
margin-top:auto; }
footer ul { display:flex; 
justify-content:center;
list-style:none; gap:20px; }
footer ul li a { color:#8f44ff; font-weight:bold; 
text-decoration:none;
transition:0.3s ease; }
footer ul li a:hover { text-decoration:underline; }
</style>
</head>
<body>

<header>
    <h1>Reset Password</h1>
    <p>Set your new password below</p>
</header>

<div class="auth-container">
    <div class="auth-card">
        <h2>New Password</h2>
        <p class="auth-subtitle">Please enter your new password</p>

        <form id="resetForm" method="POST" action="/reset-password">
            <div class="form-group">
                <label for="password">New Password</label>
                <input type="password" id="password" name="password" placeholder="Enter new password" required>
                <span class="error-message" id="passwordError"></span>
            </div>

            <div class="form-group">
                <label for="confirmPassword">Confirm Password</label>
                <input type="password" id="confirmPassword" name="confirmPassword" placeholder="Confirm new password" required>
                <span class="error-message" id="confirmPasswordError"></span>
            </div>

            <button type="submit" class="btn-submit" id="submitBtn">
                <span class="btn-text">Reset Password</span>
                <span class="btn-loader" style="display:none;">⏳</span>
            </button>

            <div class="form-message" id="formMessage"></div>
        </form>

        <div class="auth-footer">
            <p>Remembered your password? <a href="login.html">Login here</a></p>
            <p>Don't have an account? <a href="signup.html">Sign up here</a></p>
        </div>
    </div>
</div>

<footer>
    <ul>
        <li><a target="_blank" href="mailto:devcore.communicate@gmail.com">Email</a></li>
        <li><a target="_blank" href="tel:+966359797419">Telephone</a></li>
        <li><a target="_blank" href="https://www.instagram.com/dev.core.egy">Instagram</a></li>
    </ul>
</footer>

<script>
const resetForm = document.getElementById('resetForm');
const submitBtn = document.getElementById('submitBtn');
const formMessage = document.getElementById('formMessage');

resetForm.addEventListener('submit', async e => {
    e.preventDefault();

    const password = document.getElementById('password').value.trim();
    const confirmPassword = document.getElementById('confirmPassword').value.trim();

    // تحقق من تطابق الباسوردات
    if(password !== confirmPassword){
        formMessage.className = 'form-message error';
        formMessage.textContent = 'Passwords do not match';
        return;
    }

    submitBtn.disabled = true;
    submitBtn.querySelector('.btn-text').style.display = 'none';
    submitBtn.querySelector('.btn-loader').style.display = 'inline-block';
    formMessage.style.display = 'none';

    const token = new URLSearchParams(window.location.search).get('token');

    try {
        const res = await fetch(resetForm.action, {
            method:'POST',
            headers:{'Content-Type':'application/json'},
            body: JSON.stringify({ password, token })
        });

        const data = await res.json();

        if(res.ok){
            formMessage.className = 'form-message success';
            formMessage.textContent = 'Password has been reset successfully!';
        } else {
            formMessage.className = 'form-message error';
            formMessage.textContent = data.message || 'Failed to reset password';
        }

    } catch(err){
        formMessage.className = 'form-message error';
        formMessage.textContent = 'Network error';
    }

    submitBtn.disabled = false;
    submitBtn.querySelector('.btn-text').style.display = 'inline-block';
    submitBtn.querySelector('.btn-loader').style.display = 'none';
});
</script>

</body>
              </html>
